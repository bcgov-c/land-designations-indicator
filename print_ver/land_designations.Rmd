---
topic: "land"
title: "Land Designations for Limited Resource Extraction in B.C."
output: envreportutils.internal::print_ver
editor_options: 
  chunk_output_type: console
---
<!--
Copyright 2018 Province of British Columbia

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and limitations under the License.
-->



```{r set-options, echo=FALSE, cache=FALSE, warning=FALSE, message=FALSE}

knitr::opts_chunk$set(echo=FALSE, cache=FALSE, message=FALSE, warning=FALSE, 
                      error=FALSE)

library(ggplot2)
library(envreportutils) #theme_soe_facet
library(magrittr) # %>%
library(ggthemes)
library(knitr) #for knitting to PDF
library(tidyr)
library(dplyr)
library(stringr)
library(ggtext)
library(patchwork)

## set working directory.
knitr::opts_knit$set(root.dir =  paste0(str_remove(getwd(),"print_ver"), "/"))
root_directory = paste0(str_remove(getwd(),"print_ver"), "/")

## Find the root of the project so we can find the files in the directory tree.
# root <- rprojroot::is_rstudio_project

# read_chunk(root$find_file("03_output_static.R"))

## read in datafiles
bc_reg_dat = read.csv(paste0(root_directory,'land_designations_webapp/www/bc_reg_dat.csv')) %>%
  mutate(max_restriction_value = factor(max_restriction_value,
                                        levels = c("Full","High","Medium","Low","None")))

### Custom plotting functions.
regdist_barplot = function(dat, industry = NULL, district = NULL){
  
  mapping_dat = bc_reg_dat %>%
    filter(str_detect(industry_name, industry)) %>%
    filter(DISTRICT_NAME %in% district) %>% 
    mutate(Proportion = paste0(round(100*proportional_area,1),"%"))
  
  g = ggplot(mapping_dat,
             aes(label = Proportion)) +
    geom_col(aes(x = max_restriction_value,
                 y = proportional_area,
                 fill = max_restriction_value,
                 col = max_restriction_value),
             size = 1/5) +
    geom_label(aes(x = max_restriction_value,
                   y = 0.80*proportional_area,
                   label = paste0(round(100*proportional_area,1),"%"))) +
    coord_flip() +
    scale_y_continuous(labels = scales::label_percent(),
                       breaks = scales::breaks_pretty(n = 5)) +
    labs(x = "Restriction Level",
         y = "Percent of <br>Area") +
    theme_bw() +
    theme(axis.text = element_text(size = 14),
          axis.title.y = element_text(size = 16),
          axis.title.x = element_markdown(size = 16),
          legend.position = 'none')
  
  # Number of restriction levels (this varies!)
  num_levels = length(unique(mapping_dat$max_restriction_value))
  
  # Colour palette (conditional)
  my_palette = case_when(
    str_detect(industry, 'forest.*') ~ 'Greens',
    str_detect(industry, 'mine.*') ~ 'Purples',
    str_detect(industry, 'og.*') ~ 'Oranges'
  )
  
  my_fill_scale = rev(RColorBrewer::brewer.pal(n = num_levels, my_palette))
  my_fill_scale[num_levels] = 'white'
  my_color_scale = c(rep('white',num_levels-1),'black')
  
  g = g + scale_fill_manual(values = my_fill_scale) +
    scale_color_manual(values = my_color_scale)
  
  g
}
```

```{r pre}
```

Land designations are spatially defined areas established through legislation or purchased for the protection of nature and cultural values. Each designation specifies the limit of resource extraction for one or more of the following industries: forestry, mining, and oil and gas.

- For this indicator, land designations have been grouped into five levels of industry restriction: **Full, High, Medium, Low, and None.** The five categories span a considerable range in industry restriction, with variation in purpose, scope, strength, and length of the term of the designations. In addition, the mosaic of land designations in B.C. is complex and many designations overlap. Note: Land Designations of the three industries should be treated independently and therefore should not be summed.
- **Full Restriction**—23.9% for forestry, 19.1% for mining, and 16.0% for oil and gas.
- **High Restriction**-—5.3% for forestry, 0% for mining, and 0% for oil and gas.
- **Medium Restriction**—23.4% for forestry, 3.0% for mining, and 28.0% for oil and gas.
- **Low Restriction**—7.1% for forestry, 7.4% for mining, and 4.4% for oil and gas.
- **No Restriction**—40.2% for forestry, 70.5% for mining, and 51.5% for oil and gas.
- More detail on the land designations and the three industries are provided below.


\begin{center}
\fbox{
\begin{minipage}[c]{12cm}

\begingroup\centering{\textbf{Protected Lands in British Columbia}}

\endgroup

\vspace{1mm}

\text{In B.C., \textbf{59.8\%} of lands have restricted forestry, \textbf{29.5\%} of lands have restricted mining,} 

\text{and \textbf{48.5\%} of lands have restricted oil and gas extraction.}

\vspace{3mm}

\end{minipage}
}
\end{center}

```{r set_general_layout_for_provincial_figures}
my_layout = "
AAAAAA
AAAAAA
AAAAAA
AAAAAA
BBBBBB
BBBBBB
"
```

```{r forest_figures, fig.height=9.5, fig.width=7, results='asis'}

cat("## Provincial Map of Forestry Restriction Land Designations\n")

forest_map = ggplot() + 
  ggimage::geom_image(aes(image = paste0(root_directory,"out/forest_restriction_plot.jpeg"),
                          x = 1, y = 1), size = 1) + ggthemes::theme_map() + coord_fixed()

forest_barplot = regdist_barplot(bc_reg_dat, industry = 'forest', district = 'Provincial')

forest_map + forest_barplot + plot_layout(design = my_layout)
```

\newpage

## Provincial Map of Mining Restriction Land Designations

```{r mine_figures, fig.height=9.5, fig.width=7}

mine_map = ggplot() + 
  ggimage::geom_image(aes(image = paste0(root_directory,"out/mine_restriction_plot.jpeg"),
                          x = 1, y = 1), size = 1) + ggthemes::theme_map() + coord_fixed()

mine_barplot = regdist_barplot(bc_reg_dat, industry = 'mine', district = 'Provincial')

mine_map / mine_barplot + plot_layout(design = my_layout)
```

\newpage

## Provincial Map of Oil and Gas Restriction Land Designations

```{r og_figures, fig.height=9.5, fig.width=7}

og_map = ggplot() + 
  ggimage::geom_image(aes(image = paste0(root_directory,"out/og_restriction_plot.jpeg"),
                          x = 1, y = 1), size = 1) + ggthemes::theme_map() + coord_fixed()

og_barplot = regdist_barplot(bc_reg_dat, industry = 'og', district = 'Provincial')

og_map / og_barplot + plot_layout(design = my_layout)

# \newpage
```

# Appendix

```{r}
# The following figures detail the land designations of the three described industries (forestry, mining, and oil and gas) for each natural resource district individually.
```


```{r echo=FALSE, fig.height=10, fig.width=7, results='asis'}
my_names = unique(bc_reg_dat$DISTRICT_NAME)
my_names = my_names[!my_names %in% c('Provincial',NA)]

for(region_name in my_names) {
  
  if(region_name != '100 Mile House Natural Resource District'){
    cat("\\newpage\n")
  }
  
  image_size = 1
  
  #Forest
  my_jpeg_forest = ggplot() +
    ggimage::geom_image(aes(
      image = paste0("land_designations_webapp/www/regdist_figs/forest_restriction_max_",region_name,".jpeg"),
      x = 1, y = 1), 
      size = image_size) + 
    # ggtitle(paste0(region_name, " - Forestry (2022)")) +
    ggtitle("Forestry") +
    ggthemes::theme_map() + 
    theme(title = element_text(size = 10)) +
    coord_fixed()
  
  my_barplot_forest = regdist_barplot(bc_reg_dat, industry = 'forest', district = region_name)
  
  my_patch_forest = my_jpeg_forest / my_barplot_forest #+ plot_layout(widths = 1)
  
  #Mining
  my_jpeg_mining = ggplot() +
    ggimage::geom_image(aes(
      image = paste0("land_designations_webapp/www/regdist_figs/mine_restriction_max_",region_name,".jpeg"),
      x = 1, y = 1), 
      size = image_size) + 
    # ggtitle(paste0(region_name, " - Mining (2022)")) +
    ggtitle("Mining") +
    ggthemes::theme_map() + 
    theme(title = element_text(size = 10)) +
    coord_fixed()
  
  my_barplot_mining = regdist_barplot(bc_reg_dat, industry = 'mine_', district = region_name)
  
  my_patch_mining = my_jpeg_mining / my_barplot_mining# + plot_layout(widths = 1)
  
  #Oil and Gas
  my_jpeg_og = ggplot() +
    ggimage::geom_image(aes(
      image = paste0("land_designations_webapp/www/regdist_figs/og_restriction_max_",region_name,".jpeg"),
      x = 1, y = 1), 
      size = image_size) + 
    # ggtitle(paste0(region_name, " - Oil and Gas (2022)")) +
    ggtitle("Oil and Gas") +
    ggthemes::theme_map() + 
    theme(title = element_text(size = 10)) +
    coord_fixed()
  
  my_barplot_og = regdist_barplot(bc_reg_dat, industry = 'og_', district = region_name)
  
  my_patch_og = my_jpeg_og / my_barplot_og #+ plot_layout(widths = 1)
  
  my_layout <- "
AB
CD
EF
"
  patchwork = my_jpeg_forest + my_barplot_forest + my_jpeg_mining + my_barplot_mining + my_jpeg_og + my_barplot_og + plot_layout(design = my_layout, heights = c(1,1))
  
  patchwork = patchwork + plot_annotation(title = region_name)
  
  cat("\n")

  print(patchwork)
}
```

## Details of Land Designations that Contribute to Conservation 

The complete list of included land designations, category information,
data sources, and data licence details is [available in CSV
format](https://github.com/bcgov/designatedlands/blob/master/sources_designations.csv).

## Methods

Overlaps among land designations have been accounted for in the
analysis. While B.C. does use aspatial land management tools, this
indicator only reports on *legal, spatially-defined* areas that
contribute to conservation. The analysis presents the current status of
land designations and the intended contribution to conservation---the
effectiveness of land designations has not been evaluated. The [**Python**](https://www.python.org/) and [**R**](http://www.r-project.org) code for repeating the analysis and data visualizations presented on this page is available on [GitHub](https://github.com/bcgov/land-designations-indicator).

## References and Other Useful Links

-   [Learn more about Protected Lands & Waters in
B.C.](http://www.env.gov.bc.ca/soe/indicators/land/protected-lands-and-waters.html)
-   [BC Parks](http://www.env.gov.bc.ca/bcparks/)
-   [B.C. Government Conservation
Lands](http://www.env.gov.bc.ca/fw/habitat/conservation-lands/)
-   [British Columbia Non-Governmental Organization Conservation Areas
Summary Report
2015-2016](http://ltabc.ca/publications-a-research/british-columbia-conservation-areas-summary-report-2015-16/)
-   [B.C. Crown
Land](http://www2.gov.bc.ca/gov/content?id=63DF75221AF440A4AA6A9BCD34711A8C)

## Data

\*By accessing these datasets, you agree to the licence associated with each file, as indicated in parentheses below.

-   [Indicator Summary Data: Land Designations for Limited Resource Extraction in B.C.](https://catalogue.data.gov.bc.ca/dataset/2ad14e62-e0b1-4989-9333-6082177f61e8) (Licence: [Open Government Licence - British Columbia](http://www2.gov.bc.ca/gov/content?id=A519A56BC2BF44E4A008B33FCF527F61))

-   [Land Designations Limited Resource Extraction in B.C. - Spatial Data](https://catalogue.data.gov.bc.ca/dataset/e0b30537-5498-437b-b668-9fafe44bf903) (Licence: [Open Government Licence - British Columbia](http://www2.gov.bc.ca/gov/content?id=A519A56BC2BF44E4A008B33FCF527F61))

Published and Available On-Line at Environmental Reporting BC (December 2022):
[http://www.env.gov.bc.ca/soe/indicators/land/land-designations.html](http://www.env.gov.bc.ca/soe/indicators/land/land-designations.html)

Email correspondence to: envreportbc@gov.bc.ca
